Practical No 3

Aim: Perform file operation in Node.js

I. Reading a file
Sample.txt
Hello Everyone
a. Synchronously reads the entire content of file.
Read.js
const fs = require("fs")
const a = fs.readFileSync('./sample.txt',"utf-8")
console.log(a)
 
b. Asynchronously reads the entire content of a file.
Async.js
const fs = require("fs")
fs.readFile("./sample.txt","utf-8",
    (error,data)=>{
        if(error){
            throw new Error('Error reading file')
        }
        console.log(data)
    }
)
 
C. Read a file content in Async Function.
const fs = require("fs").promises;
async function readFile(){
    try{
        const data = await fs.readFile("sample.txt","utf-8");
        console.log(data);
    }
    catch(err){
        console.log(err);
    }
}
readFile()

 




II. Writing File
a. create a file write.txt
b. Add some content to it. Read the file
c. Append data to the file
d. Rename the file
e. Read the file again after appending
f. Delete the file

const fs=require('fs/promises')
const writeFunct=async()=>{
    try{
        const d=await fs.readFile('write.txt','utf-8');
        console.log(d)
        await fs.writeFile('write.txt','Writing in a file',"utf-8")
        await fs.appendFile('write.txt','\n data append via node.js',"utf-8")
        await fs.rename('write.txt','NewWrite.txt')
        const data=await fs.readFile('NewWrite.txt',"utf-8")
        console.log(data)
    }
    catch(err){
        throw err
    }
}
writeFunct()

Output:
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

III) Create a Node.js program that allows user to input text via the command line. Once the user enters the text, the program should save the input into a file named text.txt. Additionally, the program should emit a custom event indicating that the text is ready for processing.

const fs = require('fs');
const readline = require('readline');
const EventEmitter = require('events');
const eventEmitter = new EventEmitter();
const r1 = readline.createInterface({
    input: process.stdin,
    output: process.stdout
});
function handleInput(input){
    eventEmitter.emit('textReady',input);
}
eventEmitter.on('textReady',(text)=>{
    console.log('Custom event fired: Text is ready - ${text}');
    fs.writeFile('text.txt',text,(err)=>{
        if (err) throw err;
        console.log('Text has been saved to text.txt');
        r1.close();
    });
});
r1.question('Enter Some text:',(text)=>{
    handleInput(text);
});

Output:
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX